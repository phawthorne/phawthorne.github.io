

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>root_source package &mdash; ROOT  documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Release Notes" href="release_notes.html" />
    <link rel="prev" title="Examples" href="examples.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> ROOT
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="workflow.html">Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="interface_guide.html">Interface guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="sample_data_walkthrough.html">Sample data walkthrough</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">ROOT UI code</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-root_source.root">root module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-root_source.preprocessing">preprocessing module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-root_source.optimization">optimization module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-root_source.optim_core">optim_core module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-root_source.postprocessing">postprocessing module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-root_source.arith_parser">arith_parser module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">Release Notes</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ROOT</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>root_source package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/rst/root_source.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="root-source-package">
<h1>root_source package<a class="headerlink" href="#root-source-package" title="Permalink to this headline">¶</a></h1>
<p>This page provides documentation for ROOT’s python code. It is not necessary to read this documentation to use ROOT through the UI, but it is provided for interested users. Most modules have private functions that can be inspected by clicking on the “source” links.</p>
<div class="section" id="module-root_source.root">
<span id="root-module"></span><h2>root module<a class="headerlink" href="#module-root_source.root" title="Permalink to this headline">¶</a></h2>
<p>Main application script</p>
<dl class="function">
<dt id="root_source.root.execute">
<code class="descclassname">root_source.root.</code><code class="descname">execute</code><span class="sig-paren">(</span><em>args</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/root.html#execute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.root.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Main entry point for a call from the UI or a calling script</p>
<p>Depending on flags, calls <a class="reference internal" href="#root_source.preprocessing.execute" title="root_source.preprocessing.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">root_source.preprocessing.execute()</span></code></a>,
<a class="reference internal" href="#root_source.optimization.execute" title="root_source.optimization.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">root_source.optimization.execute()</span></code></a>, and
<a class="reference internal" href="#root_source.postprocessing.execute" title="root_source.postprocessing.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">root_source.postprocessing.execute()</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>args</strong> (<em>dict</em>) – dict with required configuration values.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="root_source.root.parse_args">
<code class="descclassname">root_source.root.</code><code class="descname">parse_args</code><span class="sig-paren">(</span><em>ui_args</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/root.html#parse_args"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.root.parse_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Validates arguments from the UI and constructs args for analysis functions.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ui_args</strong> (<em>dict</em>) – input from UI (or equivalent call from a script)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">validated and parsed arguments</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">root_args (dict)</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-root_source.preprocessing">
<span id="preprocessing-module"></span><h2>preprocessing module<a class="headerlink" href="#module-root_source.preprocessing" title="Permalink to this headline">¶</a></h2>
<p>Spatial processing functions.</p>
<p>The <a class="reference internal" href="#root_source.preprocessing.execute" title="root_source.preprocessing.execute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">execute()</span></code></a> function in this module performs the entire workflow of converting
spatial inputs to ROOT to the input tables required for the optimization step.</p>
<dl class="function">
<dt id="root_source.preprocessing.execute">
<code class="descclassname">root_source.preprocessing.</code><code class="descname">execute</code><span class="sig-paren">(</span><em>args</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/preprocessing.html#execute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.preprocessing.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Encapsulate optimization workflow.</p>
<p>This algorithm creates an SDU grid, a marginal gain raster,
aggregate those value to the grid, create a table for an IP
optimizer, and invokes that optimizer.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>args</strong> (<em>dict</em>) – <p>must contain the following fields:</p>
<ul class="simple">
<li>activity_masks: <em>tbd</em></li>
<li>baseline_file: <em>tbd</em></li>
<li>cell_size: <em>tbd</em></li>
<li>combined_factors: <em>tbd</em></li>
<li>csv_output_folder: <em>tbd</em></li>
<li>grid_type: <em>tbd*</em></li>
<li>mask_raster: <em>tbd</em></li>
<li>raster_li: <em>tbd</em></li>
<li>raster_table: <em>tbd</em></li>
<li>sdu_id_col: <em>tbd</em></li>
<li>serviceshed_list: <em>tbd</em></li>
<li>workspace: <em>tbd</em></li>
</ul>
<dl class="docutils">
<dt>raster_list (list): list of paths to single band raster paths on</dt>
<dd>disk that represent per-pixel marginal values.  These rasters
must be the same size and in geospatial projection.</dd>
<dt>value_names (list): a parallel list of <cite>raster_list</cite> representing</dt>
<dd>the well known names of the raster paths in <cite>raster_list</cite>.
These names are later used by the optimizer for objectives
and constraints.</dd>
<dt>raster_table (RasterTable): class holding paths to rasters indexed</dt>
<dd>by activity and factor names: raster_table[a][f] -&gt; path.
Has attributes activity_names and factor_names containing lists
of each naming type taken from the raster table file.</dd>
<dt>mask_raster (string): path to a single band raster that indicates</dt>
<dd>pixels of interest.  This raster must be the same size and
be in the same geospatial projection as those in
<cite>raster_list</cite>.  Any nodata pixels in this list mask out all
values given in <cite>raster_list</cite>.</dd>
<dt>workspace (string): path to a directory to use as a workspace.</dt>
<dd>NOT SURE WHERE THIS IS USED</dd>
<dt>output_folder (string): path to output files. This will include</dt>
<dd>at least the generated spatial decision unit grid. ANY OTHERS?
NOTE IN EXAMPLE IT’S LISTED TWICE.</dd>
<dt>grid_type (string): one of ‘square’ or ‘hexagon’ which is used to</dt>
<dd>indicate the shape of the spatial decision grid generated by
this worksflow.</dd>
<dt>cell_size (int/float): indicates the cell size of the spatial</dt>
<dd>decision unit grid in the projected linear units of the
<cite>mask_raster</cite>.  If <cite>grid_type</cite> is ‘square’, then this
indicates the side length of the grid.  If <cite>hexagon</cite>,
indicates minor axis length.</dd>
<dt>csv_output_folder (string): destination folder for the output csvs.</dt>
<dd>Individual files will be named after their activity name.</dd>
<dt>baseline_file (string): name of target baseline file which is a</dt>
<dd>copy of <cite>csv_filepath</cite> except all marginal values are set to
0.</dd>
<dt>sdu_id_col (string): desired name of the column generated in</dt>
<dd><cite>csv_filepath</cite> which represents the spatial decision unit ID.</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">None.</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-root_source.optimization">
<span id="optimization-module"></span><h2>optimization module<a class="headerlink" href="#module-root_source.optimization" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="root_source.optimization.ensure_args_dict">
<code class="descclassname">root_source.optimization.</code><code class="descname">ensure_args_dict</code><span class="sig-paren">(</span><em>args</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optimization.html#ensure_args_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optimization.ensure_args_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>args can be a dict or a json filename, returns a dict</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>args</strong> – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="root_source.optimization.execute">
<code class="descclassname">root_source.optimization.</code><code class="descname">execute</code><span class="sig-paren">(</span><em>config_file_or_dict</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optimization.html#execute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optimization.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a config json file or dict, completes the entire optimization processing flow.
config_file_or_dict must contain:</p>
<blockquote>
<div><ul class="simple">
<li>data_folder: folder containing the value tables</li>
<li>sdu_id_col: the column in the value tables that indexes each SDU</li>
<li>baseline_file: management option to treat as choice 0</li>
<li>optimization_folder: output folder</li>
<li>analysis_type: one of the options provided by oooe</li>
</ul>
</div></blockquote>
<p>config_file_or_dict must also contain values that describe the optimization
problem to be solved. These will depend on the analysis type.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>config_file_or_dict</strong> – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="root_source.optimization.get_activity_names">
<code class="descclassname">root_source.optimization.</code><code class="descname">get_activity_names</code><span class="sig-paren">(</span><em>config</em>, <em>include_baseline=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optimization.html#get_activity_names"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optimization.get_activity_names" title="Permalink to this definition">¶</a></dt>
<dd><p>returns the names of the activities with baseline first</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>config</strong> – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="root_source.optimization.get_data_cols">
<code class="descclassname">root_source.optimization.</code><code class="descname">get_data_cols</code><span class="sig-paren">(</span><em>config</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optimization.html#get_data_cols"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optimization.get_data_cols" title="Permalink to this definition">¶</a></dt>
<dd><p>extracts the data table column names that will be used by the optimizer.
these will be the names of the objective and constraint variables.</p>
</dd></dl>

<dl class="function">
<dt id="root_source.optimization.get_header_list">
<code class="descclassname">root_source.optimization.</code><code class="descname">get_header_list</code><span class="sig-paren">(</span><em>filename</em>, <em>delimiter='</em>, <em>'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optimization.html#get_header_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optimization.get_header_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads the first line of filename, splits it with delimiter, returns the
resulting list.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>filename</strong> – </li>
<li><strong>delimiter</strong> – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="root_source.optimization.make_analysis_def">
<code class="descclassname">root_source.optimization.</code><code class="descname">make_analysis_def</code><span class="sig-paren">(</span><em>config</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optimization.html#make_analysis_def"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optimization.make_analysis_def" title="Permalink to this definition">¶</a></dt>
<dd><p>This function just makes a copy and returns it. It used to do a lot more, but
that functionality has been moved to the analysis objects.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>config</strong> – </td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="root_source.optimization.make_analysis_object">
<code class="descclassname">root_source.optimization.</code><code class="descname">make_analysis_object</code><span class="sig-paren">(</span><em>data</em>, <em>analysis_def</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optimization.html#make_analysis_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optimization.make_analysis_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the appropriate oooe.Analysis object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data</strong> – </li>
<li><strong>analysis_def</strong> – </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="root_source.optimization.make_exclude_list">
<code class="descclassname">root_source.optimization.</code><code class="descname">make_exclude_list</code><span class="sig-paren">(</span><em>data</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optimization.html#make_exclude_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optimization.make_exclude_list" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-root_source.optim_core">
<span id="optim-core-module"></span><h2>optim_core module<a class="headerlink" href="#module-root_source.optim_core" title="Permalink to this headline">¶</a></h2>
<p>Contains primary class types for optimization analyses.</p>
<p>These are:</p>
<ul class="simple">
<li><a class="reference internal" href="#root_source.optim_core.Data" title="root_source.optim_core.Data"><code class="xref py py-class docutils literal notranslate"><span class="pre">Data</span></code></a> which holds the tables giving objective/constraint scores for each potential decision.</li>
<li><a class="reference internal" href="#root_source.optim_core.Problem" title="root_source.optim_core.Problem"><code class="xref py py-class docutils literal notranslate"><span class="pre">Problem</span></code></a> which holds a single optimization problem.</li>
<li><dl class="first docutils">
<dt><a class="reference internal" href="#root_source.optim_core.Analysis" title="root_source.optim_core.Analysis"><code class="xref py py-class docutils literal notranslate"><span class="pre">Analysis</span></code></a> and subclasses, which hold a collection of problems that make up a trade-off curve or other analysis.</dt>
<dd><ul class="first last">
<li><a class="reference internal" href="#root_source.optim_core.Single" title="root_source.optim_core.Single"><code class="xref py py-class docutils literal notranslate"><span class="pre">Single</span></code></a></li>
<li><a class="reference internal" href="#root_source.optim_core.ConfigList" title="root_source.optim_core.ConfigList"><code class="xref py py-class docutils literal notranslate"><span class="pre">ConfigList</span></code></a></li>
<li><a class="reference internal" href="#root_source.optim_core.NDimFrontier" title="root_source.optim_core.NDimFrontier"><code class="xref py py-class docutils literal notranslate"><span class="pre">NDimFrontier</span></code></a></li>
<li><a class="reference internal" href="#root_source.optim_core.WeightTableIterator" title="root_source.optim_core.WeightTableIterator"><code class="xref py py-class docutils literal notranslate"><span class="pre">WeightTableIterator</span></code></a></li>
</ul>
</dd>
</dl>
</li>
</ul>
<dl class="class">
<dt id="root_source.optim_core.Analysis">
<em class="property">class </em><code class="descclassname">root_source.optim_core.</code><code class="descname">Analysis</code><span class="sig-paren">(</span><em>data</em>, <em>config</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optim_core.html#Analysis"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optim_core.Analysis" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Parent class for all analysis types.</p>
<p>What are the functions/capabilities that all analyses need to have?</p>
<ol class="arabic simple">
<li>run</li>
<li>get item: analysis[i] returns ith point</li>
<li>iterate through stored points</li>
<li>save to reports (summary, full details, maps)</li>
</ol>
<p>This class assumes that all problems will be added to a list (self.problems), and that
the problems have a problem.solve() method. Calling self.run() on the analysis will
call solve() on all problems.</p>
<dl class="method">
<dt id="root_source.optim_core.Analysis.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>data</em>, <em>config</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optim_core.html#Analysis.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optim_core.Analysis.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates empty <code class="xref py py-attr docutils literal notranslate"><span class="pre">self.problems</span></code> list.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>data</strong> (<a class="reference internal" href="#root_source.optim_core.Data" title="root_source.optim_core.Data"><code class="xref py py-class docutils literal notranslate"><span class="pre">Data</span></code></a>) – contains problem data</li>
<li><strong>config</strong> (<em>dict</em>) – values to configure specific analysis type</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="root_source.optim_core.Analysis.factor_scores">
<code class="descname">factor_scores</code><span class="sig-paren">(</span><em>factor</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optim_core.html#Analysis.factor_scores"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optim_core.Analysis.factor_scores" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="root_source.optim_core.Analysis.problem_dict">
<code class="descname">problem_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optim_core.html#Analysis.problem_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optim_core.Analysis.problem_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="root_source.optim_core.Analysis.report">
<code class="descname">report</code><span class="sig-paren">(</span><em>report_file</em>, <em>report_type=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optim_core.html#Analysis.report"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optim_core.Analysis.report" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="root_source.optim_core.Analysis.run">
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optim_core.html#Analysis.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optim_core.Analysis.run" title="Permalink to this definition">¶</a></dt>
<dd><p>calls <a class="reference internal" href="#root_source.optim_core.Problem.solve" title="root_source.optim_core.Problem.solve"><code class="xref py py-meth docutils literal notranslate"><span class="pre">solve()</span></code></a> on all problems in <cite>self.problems</cite></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="root_source.optim_core.Analysis.save_decision_tables">
<code class="descname">save_decision_tables</code><span class="sig-paren">(</span><em>folder</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optim_core.html#Analysis.save_decision_tables"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optim_core.Analysis.save_decision_tables" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls <a class="reference internal" href="#root_source.optim_core.Problem.solution_to_csv" title="root_source.optim_core.Problem.solution_to_csv"><code class="xref py py-meth docutils literal notranslate"><span class="pre">solution_to_csv()</span></code></a> on all problems in <code class="xref py py-attr docutils literal notranslate"><span class="pre">self.problems</span></code>. Files will be
generated at <code class="file docutils literal notranslate"><span class="pre">folder/solution_id.csv</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>folder</strong> (<em>str</em>) – output folder (will be created if it does not exist)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="root_source.optim_core.Analysis.save_summary_table">
<code class="descname">save_summary_table</code><span class="sig-paren">(</span><em>folder</em>, <em>add_cols=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optim_core.html#Analysis.save_summary_table"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optim_core.Analysis.save_summary_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a table with summary stats (summed results) for each solution in the <a class="reference internal" href="#root_source.optim_core.Analysis" title="root_source.optim_core.Analysis"><code class="xref py py-class docutils literal notranslate"><span class="pre">Analysis</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>folder</strong> (<em>str</em>) – output folder (will be created if it does not exist)</li>
<li><strong>add_cols</strong> (<em>dict</em>) – column names and data to add to output table</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="root_source.optim_core.Analysis.save_summed_choices">
<code class="descname">save_summed_choices</code><span class="sig-paren">(</span><em>folder</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optim_core.html#Analysis.save_summed_choices"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optim_core.Analysis.save_summed_choices" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves results of <a class="reference internal" href="#root_source.optim_core.Analysis.summed_choices" title="root_source.optim_core.Analysis.summed_choices"><code class="xref py py-meth docutils literal notranslate"><span class="pre">summed_choices()</span></code></a> to a csv with option names as headers.</p>
<p>The file will be saved to <code class="file docutils literal notranslate"><span class="pre">folder/summed_choices.csv</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>folder</strong> (<em>str</em>) – output folder (will be created if it does not exist)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="root_source.optim_core.Analysis.summed_choices">
<code class="descname">summed_choices</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optim_core.html#Analysis.summed_choices"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optim_core.Analysis.summed_choices" title="Permalink to this definition">¶</a></dt>
<dd><p>Sums <span class="math notranslate nohighlight">\(x_{pc}\)</span> for each parcel and choice across all solutions.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">np.array (n_parcels, n_opts)</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="root_source.optim_core.ConfigList">
<em class="property">class </em><code class="descclassname">root_source.optim_core.</code><code class="descname">ConfigList</code><span class="sig-paren">(</span><em>data</em>, <em>config_list</em>, <em>solver=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optim_core.html#ConfigList"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optim_core.ConfigList" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#root_source.optim_core.Analysis" title="root_source.optim_core.Analysis"><code class="xref py py-class docutils literal notranslate"><span class="pre">root_source.optim_core.Analysis</span></code></a></p>
<p>Helper analysis for script-driven batching.</p>
<p>Allows creation of analyses from a list of configuration dictionaries.</p>
<p>e.g. iterating through constraint values.</p>
</dd></dl>

<dl class="class">
<dt id="root_source.optim_core.Constraint">
<em class="property">class </em><code class="descclassname">root_source.optim_core.</code><code class="descname">Constraint</code><span class="sig-paren">(</span><em>factor</em>, <em>type</em>, <em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#root_source.optim_core.Constraint" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></p>
<dl class="attribute">
<dt id="root_source.optim_core.Constraint.factor">
<code class="descname">factor</code><a class="headerlink" href="#root_source.optim_core.Constraint.factor" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="attribute">
<dt id="root_source.optim_core.Constraint.type">
<code class="descname">type</code><a class="headerlink" href="#root_source.optim_core.Constraint.type" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="attribute">
<dt id="root_source.optim_core.Constraint.value">
<code class="descname">value</code><a class="headerlink" href="#root_source.optim_core.Constraint.value" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="root_source.optim_core.Data">
<em class="property">class </em><code class="descclassname">root_source.optim_core.</code><code class="descname">Data</code><span class="sig-paren">(</span><em>data_dir</em>, <em>sdu_id_col</em>, <em>data_cols=None</em>, <em>baseline_file=None</em>, <em>file_list=None</em>, <em>files_by_factor=False</em>, <em>file_glob_str=None</em>, <em>sample=None</em>, <em>sample_seed=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optim_core.html#Data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optim_core.Data" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Holds data needed for optimization</p>
<p>After initialization refer to <code class="docutils literal notranslate"><span class="pre">data.factor_names</span></code> and <code class="docutils literal notranslate"><span class="pre">data.option_names</span></code>
for the labels attached to each category. These are taken from file or column names depending
on the files_by_factor argument.</p>
<p>Specific data tables can be referenced by <code class="docutils literal notranslate"><span class="pre">data[factor_name]</span></code>, similar to dictionary reference
Columns for particular options can be referenced by <code class="docutils literal notranslate"><span class="pre">data[factor_name,</span> <span class="pre">option_name]</span></code></p>
<dl class="method">
<dt id="root_source.optim_core.Data.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>data_dir</em>, <em>sdu_id_col</em>, <em>data_cols=None</em>, <em>baseline_file=None</em>, <em>file_list=None</em>, <em>files_by_factor=False</em>, <em>file_glob_str=None</em>, <em>sample=None</em>, <em>sample_seed=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optim_core.html#Data.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optim_core.Data.__init__" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data_dir</strong> – directory to load data from.</li>
<li><strong>sdu_id_col</strong> – name of SDU key column</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first last simple">
<li><strong>data_cols</strong> – names of columns to pull from csv files, default (None) pulls all</li>
<li><strong>baseline_file</strong> – optional name of baseline file to move to first position in option list</li>
<li><strong>file_list</strong> – list of files (only the basename) to load from data_dir.</li>
<li><strong>files_by_factor</strong> – if True, treats separate files as corresponding to factors with one column per option.
Otherwise treats files as corresponding to options with one column per factor</li>
<li><strong>file_glob_str</strong> – if None, loads files in data_dir matching ‘<a href="#id1"><span class="problematic" id="id2">*</span></a>.csv’, otherwise will match given pattern</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="root_source.optim_core.Data.factor_values_for_solution">
<code class="descname">factor_values_for_solution</code><span class="sig-paren">(</span><em>sol</em>, <em>varnames=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optim_core.html#Data.factor_values_for_solution"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optim_core.Data.factor_values_for_solution" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dictionary containing the summed values for each factor
in data. keys are factornames, values are the sums.</p>
<p>Caller can subset which cols to return with varnames list.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>sol</strong> – real [0 - 1] valued array of size (n_parcels, n_opts)</li>
<li><strong>varnames</strong> – optional list of factors to evaluate</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="root_source.optim_core.NDimFrontier">
<em class="property">class </em><code class="descclassname">root_source.optim_core.</code><code class="descname">NDimFrontier</code><span class="sig-paren">(</span><em>data</em>, <em>config</em>, <em>solver=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optim_core.html#NDimFrontier"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optim_core.NDimFrontier" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#root_source.optim_core.Analysis" title="root_source.optim_core.Analysis"><code class="xref py py-class docutils literal notranslate"><span class="pre">root_source.optim_core.Analysis</span></code></a></p>
<p>Monte Carlo sampling of N-dimensional frontier.</p>
<p>This class generates random uniformly distributed weight vectors and
runs the optimization for each of these.</p>
<dl class="docutils">
<dt>config should be a dict structured as follows:</dt>
<dd><p class="first">‘npts’: number of points to build in frontier
‘objectives’: [factornames]
‘weights’: {factornames}: +/- 1.0 for each factor to determine max or min goals
‘constraints’: [ (factorname, type, value), … ]
‘fixedvals’: {index: value}: x_index will be constrained to value
‘excludedvals’ {index: list}: x_index_j will be set to zero for each</p>
<blockquote class="last">
<div>j in list</div></blockquote>
</dd>
<dt>deprecated:</dt>
<dd>‘targets’: {factornames}: target for each factor with a target
‘targettypes’: {factornames}: ‘&lt;’, ‘&gt;’, or ‘=’ (inequals will allow ==)</dd>
</dl>
<p>example of frontier_def coming from root_ui:
{</p>
<blockquote>
<div>‘analysis_type’: u’n_dim_frontier’,
‘flatten_objectives’: False,
‘normalize_objectives’: True,
‘npts’: 15,
‘objectives’: [‘sed_hyd’, ‘phos_wetl’, ‘n_export’],
‘targets’: {‘maskpixha’: 20000.0},
‘targettypes’: {‘maskpixha’: ‘=’},
‘use_mp’: False,
‘weights’: {‘n_export’: -1.0, ‘phos_wetl’: -1.0, ‘sed_hyd’: -1.0}</div></blockquote>
<p>}</p>
</dd></dl>

<dl class="class">
<dt id="root_source.optim_core.NPFixedSeed">
<em class="property">class </em><code class="descclassname">root_source.optim_core.</code><code class="descname">NPFixedSeed</code><span class="sig-paren">(</span><em>seed</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optim_core.html#NPFixedSeed"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optim_core.NPFixedSeed" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>For use as a context manager for controllable rng. Ensures that numpys’s rng is returned to
original state outside of the calling context.</p>
</dd></dl>

<dl class="class">
<dt id="root_source.optim_core.Problem">
<em class="property">class </em><code class="descclassname">root_source.optim_core.</code><code class="descname">Problem</code><span class="sig-paren">(</span><em>data</em>, <em>problem_def</em>, <em>solver=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optim_core.html#Problem"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optim_core.Problem" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>The problem class. Represents a single optimization evaluation.</p>
<p>problem_def should be a dict structured as follows</p>
<ul>
<li><p class="first">‘weights’: {factorname: weight} for each factor &lt;- i.e. another dict</p>
</li>
<li><p class="first">‘constraints’: [ (factorname, type, value), …] list of single-factor constraints</p>
</li>
<li><dl class="first docutils">
<dt>‘factor_by_option_constraints’: [ (factorname, option, type, value), … ] applies the constraint</dt>
<dd><p class="first">only to the listed option.</p>
<dl class="last docutils">
<dt>deprecated:</dt>
<dd><p class="first last">‘targets’: {factorname: target} for each factor with a target
‘target_types’: {factorname: ‘&lt;’, ‘&gt;’, or ‘=’ } (inequals will allow ==)</p>
</dd>
</dl>
</dd>
</dl>
</li>
</ul>
<dl class="docutils">
<dt>optional problem args:</dt>
<dd><p class="first">‘fixed_vals’: {index: value}: x_index will be constrained to value
‘excluded_vals’ {index: list}: x_index_j will be set to zero for each</p>
<blockquote>
<div>j in list</div></blockquote>
<dl class="last docutils">
<dt>‘exclusive_choices’: None, list, or list of lists. The values in the list should be the j-indices</dt>
<dd><p class="first">of the options to be made mutually-exclusive
* None: default, assumes that all choices are mutually exclusive
* list: only the options in the list are exclusive with each other. All options not in the</p>
<blockquote>
<div>list can be selected regardless of selection in the listed options, or the other
non-listed options</div></blockquote>
<ul class="last simple">
<li><dl class="first docutils">
<dt>list of lists: creates several sets of mutually exclusive options, but can choose one option</dt>
<dd>from each set. Options not included in a list can be selected or not independent of
selection in the mutually-exlusive sets.</dd>
</dl>
</li>
</ul>
</dd>
<dt>‘normalize_objectives’: True or False (assumed False if arg not present)</dt>
<dd>this will rescale all arguments to be between 0 and 1
‘flatten_objectives’: True or False (assumed False if arg not present)
this replaces objective values with their relative rank
NOTE: I think this might produce solutions that aren’t actually
on the frontier.</dd>
</dl>
</dd>
</dl>
<dl class="method">
<dt id="root_source.optim_core.Problem.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>data</em>, <em>problem_def</em>, <em>solver=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optim_core.html#Problem.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optim_core.Problem.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Problem creation function</p>
<p>after the problem has been run, the results are attainable as:</p>
<ul class="simple">
<li><code class="xref py py-attr docutils literal notranslate"><span class="pre">p.solution</span></code>: nsdus x nopts numpy array with values between 0 and 1</li>
<li><code class="xref py py-attr docutils literal notranslate"><span class="pre">p.objective_values</span></code>: {factor: value} summed scores for all factors</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>data</strong> – a Data object</li>
<li><strong>problem_def</strong> – a dictionary describing the problem to solve</li>
<li><strong>solver</strong> – optional argument to specify the solver</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="root_source.optim_core.Problem.add_constraint">
<code class="descname">add_constraint</code><span class="sig-paren">(</span><em>factorname</em>, <em>value</em>, <em>type</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optim_core.html#Problem.add_constraint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optim_core.Problem.add_constraint" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="root_source.optim_core.Problem.add_weight">
<code class="descname">add_weight</code><span class="sig-paren">(</span><em>factorname</em>, <em>weight</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optim_core.html#Problem.add_weight"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optim_core.Problem.add_weight" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="root_source.optim_core.Problem.normalize_factor_data">
<em class="property">static </em><code class="descname">normalize_factor_data</code><span class="sig-paren">(</span><em>fv</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optim_core.html#Problem.normalize_factor_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optim_core.Problem.normalize_factor_data" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="root_source.optim_core.Problem.remove_constraint">
<code class="descname">remove_constraint</code><span class="sig-paren">(</span><em>factorname</em>, <em>value</em>, <em>type</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optim_core.html#Problem.remove_constraint"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optim_core.Problem.remove_constraint" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="root_source.optim_core.Problem.remove_weight">
<code class="descname">remove_weight</code><span class="sig-paren">(</span><em>factorname</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optim_core.html#Problem.remove_weight"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optim_core.Problem.remove_weight" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="staticmethod">
<dt id="root_source.optim_core.Problem.single_choice_constraint_mats">
<em class="property">static </em><code class="descname">single_choice_constraint_mats</code><span class="sig-paren">(</span><em>nunits</em>, <em>nopts</em>, <em>opt_set=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optim_core.html#Problem.single_choice_constraint_mats"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optim_core.Problem.single_choice_constraint_mats" title="Permalink to this definition">¶</a></dt>
<dd><p>converts nunits integer variables to nunits*nopts binary variables.
use case here is for choosing 1 out of nopts options for each unit</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>nunits</strong> – </li>
<li><strong>nopts</strong> – </li>
<li><strong>opt_set</strong> – </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="root_source.optim_core.Problem.solution_to_csv">
<code class="descname">solution_to_csv</code><span class="sig-paren">(</span><em>filepath</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optim_core.html#Problem.solution_to_csv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optim_core.Problem.solution_to_csv" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="root_source.optim_core.Problem.solve">
<code class="descname">solve</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optim_core.html#Problem.solve"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optim_core.Problem.solve" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds the MILP problem and calls a solver.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Optimized decision vector (matrix)</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">solution (np.array)</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="root_source.optim_core.Single">
<em class="property">class </em><code class="descclassname">root_source.optim_core.</code><code class="descname">Single</code><span class="sig-paren">(</span><em>data</em>, <em>config</em>, <em>solver=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optim_core.html#Single"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optim_core.Single" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#root_source.optim_core.Analysis" title="root_source.optim_core.Analysis"><code class="xref py py-class docutils literal notranslate"><span class="pre">root_source.optim_core.Analysis</span></code></a></p>
<p>Analysis container for a single optimization run.</p>
<dl class="method">
<dt id="root_source.optim_core.Single.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>data</em>, <em>config</em>, <em>solver=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optim_core.html#Single.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optim_core.Single.__init__" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>data</strong> – instance of <a class="reference internal" href="#root_source.optim_core.Data" title="root_source.optim_core.Data"><code class="xref py py-class docutils literal notranslate"><span class="pre">Data</span></code></a></li>
<li><strong>config</strong> – </li>
<li><strong>solver</strong> – </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="root_source.optim_core.Single.problem_dict">
<code class="descname">problem_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optim_core.html#Single.problem_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optim_core.Single.problem_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="root_source.optim_core.WeightTableIterator">
<em class="property">class </em><code class="descclassname">root_source.optim_core.</code><code class="descname">WeightTableIterator</code><span class="sig-paren">(</span><em>data</em>, <em>config</em>, <em>solver=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optim_core.html#WeightTableIterator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optim_core.WeightTableIterator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#root_source.optim_core.Analysis" title="root_source.optim_core.Analysis"><code class="xref py py-class docutils literal notranslate"><span class="pre">root_source.optim_core.Analysis</span></code></a></p>
<p>Analysis with user-specifed weights for each contained problem.</p>
<p>config should be a dict structured as follows:
.. code:
{</p>
<blockquote>
<div><p>‘npts’: number of points to build in frontier
‘objectives’: [factornames]
‘weights’: {factornames}: +/- 1.0 for each factor to determine max or min goals
‘constraints’: [ (factorname, type, value), … ]
‘fixedvals’: {index: value}: x_index will be constrained to value
‘excludedvals’ {index: list}: x_index_j will be set to zero for each</p>
<blockquote>
<div>j in list</div></blockquote>
</div></blockquote>
<dl class="docutils">
<dt>deprecated:</dt>
<dd>‘targets’: {factornames}: target for each factor with a target
‘targettypes’: {factornames}: ‘&lt;’, ‘&gt;’, or ‘=’ (inequals will allow ==)</dd>
</dl>
<p>}</p>
<p>example of frontier_def coming from root_ui:
{</p>
<blockquote>
<div>‘analysis_type’: u’n_dim_frontier’,
‘flatten_objectives’: False,
‘normalize_objectives’: True,
‘npts’: 15,
‘objectives’: [‘sed_hyd’, ‘phos_wetl’, ‘n_export’],
‘targets’: {‘maskpixha’: 20000.0},
‘targettypes’: {‘maskpixha’: ‘=’},
‘use_mp’: False,
‘weights’: {‘n_export’: -1.0, ‘phos_wetl’: -1.0, ‘sed_hyd’: -1.0}</div></blockquote>
<p>}</p>
<dl class="method">
<dt id="root_source.optim_core.WeightTableIterator.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>data</em>, <em>config</em>, <em>solver=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optim_core.html#WeightTableIterator.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optim_core.WeightTableIterator.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference internal" href="#root_source.optim_core.WeightTableIterator" title="root_source.optim_core.WeightTableIterator"><code class="xref py py-class docutils literal notranslate"><span class="pre">WeightTableIterator</span></code></a> requires that <code class="xref py py-attr docutils literal notranslate"><span class="pre">config['weights']</span></code> contain the path
to a .csv file with the appropriate sub-objective weights for each run to be
performed.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>data</strong> – instance of <a class="reference internal" href="#root_source.optim_core.Data" title="root_source.optim_core.Data"><code class="xref py py-class docutils literal notranslate"><span class="pre">Data</span></code></a></li>
<li><strong>config</strong> (<em>dict</em>) – </li>
<li><strong>solver</strong> – </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="root_source.optim_core.available_analysis_types">
<code class="descclassname">root_source.optim_core.</code><code class="descname">available_analysis_types</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optim_core.html#available_analysis_types"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optim_core.available_analysis_types" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="root_source.optim_core.ensure_args_dict">
<code class="descclassname">root_source.optim_core.</code><code class="descname">ensure_args_dict</code><span class="sig-paren">(</span><em>args</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optim_core.html#ensure_args_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optim_core.ensure_args_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper to accept args as a json file or dict.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>args</strong> (<em>dict</em><em> or </em><em>path to json file</em>) – </td>
</tr>
</tbody>
</table>
<p>Returns: args as a dict</p>
</dd></dl>

<dl class="function">
<dt id="root_source.optim_core.run">
<code class="descclassname">root_source.optim_core.</code><code class="descname">run</code><span class="sig-paren">(</span><em>config_file</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/optim_core.html#run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.optim_core.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-root_source.postprocessing">
<span id="postprocessing-module"></span><h2>postprocessing module<a class="headerlink" href="#module-root_source.postprocessing" title="Permalink to this headline">¶</a></h2>
<p>Performs post-optimization analysis.</p>
<dl class="function">
<dt id="root_source.postprocessing.execute">
<code class="descclassname">root_source.postprocessing.</code><code class="descname">execute</code><span class="sig-paren">(</span><em>args</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/postprocessing.html#execute"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.postprocessing.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructs agreement map table and shapefile.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>args</strong> (<em>dict</em>) – ROOT problem configuration dict</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-root_source.arith_parser">
<span id="arith-parser-module"></span><h2>arith_parser module<a class="headerlink" href="#module-root_source.arith_parser" title="Permalink to this headline">¶</a></h2>
<p>Helper module to parse expressions from the combined factors table.</p>
<dl class="function">
<dt id="root_source.arith_parser.apply">
<code class="descclassname">root_source.arith_parser.</code><code class="descname">apply</code><span class="sig-paren">(</span><em>data_obj</em>, <em>arith_string</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/root_source/arith_parser.html#apply"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#root_source.arith_parser.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies a given expression to the values in data container.</p>
<p>Assumes a dict-style lookup, i.e. <code class="code docutils literal notranslate"><span class="pre">data_obj['varname']</span></code>. In particular,
this works with column names in DataFrames, and factor names in <a class="reference internal" href="#root_source.optim_core.Data" title="root_source.optim_core.Data"><code class="xref py py-class docutils literal notranslate"><span class="pre">optim_core.Data</span></code></a>.</p>
<p>An expression like “factor1 + 2 * factor2” returns a np.array containing the results of executing
<code class="code docutils literal notranslate"><span class="pre">data_obj['factor1']</span> <span class="pre">+</span> <span class="pre">2</span> <span class="pre">*</span> <span class="pre">data_obj['factor2']</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>data_obj</strong> (<em>DataFrame</em><em> or </em><a class="reference internal" href="#root_source.optim_core.Data" title="root_source.optim_core.Data"><em>optim_core.Data</em></a>) – data container</li>
<li><strong>arith_string</strong> (<em>string</em>) – mathematical expression</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">np.array containing the result</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="release_notes.html" class="btn btn-neutral float-right" title="Release Notes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="examples.html" class="btn btn-neutral" title="Examples" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Peter Hawthorne.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>